(this.webpackJsonpfft_frontend=this.webpackJsonpfft_frontend||[]).push([[0],{317:function(e,t,a){e.exports=a(487)},322:function(e,t,a){},487:function(e,t,a){"use strict";a.r(t);var n=a(6),r=a.n(n),o=a(109),l=a.n(o),c=a(55),i=(a(322),a(45)),s=a(156),u=a(307),d=a(295),m=function(e){var t=e.imports,a=e.exports,o=e.flow,l=(e.year,null),c="#5E5B78",m="#4B0000";return"exports"===o?(l=a,c="#5E5B78",m="#4B0000"):(l=t,c="#C17D80",m="#161331"),Object(n.useEffect)((function(){console.log(o),console.log(a),console.log(t),i.e(u.a);var e=i.c("mapdiv",s.a);e.geodata=d.a,e.projection=new s.d.Mercator,e.zoomControl=new s.c,e.backgroundSeries.mapPolygons.template.polygon.fill=i.b("#EEE"),e.backgroundSeries.mapPolygons.template.polygon.fillOpacity=1,e.chartContainer.wheelable=!1,window.innerHeight>window.innerWidth?(e.homeZoomLevel=5,e.minZoomLevel=5):(e.homeZoomLevel=2,e.minZoomLevel=2),e.homeGeoPoint={latitude:50,longitude:11},e.maxPanOut=0;var n=e.series.push(new s.b);n.heatRules.push({property:"fill",target:n.mapPolygons.template,min:i.b(c).brighten(1.4),max:i.b(c).brighten(-.6)}),n.useGeodata=!0,n.exclude=["AQ","SJ"],n.data=l;var r=n.mapPolygons.template;return r.tooltipText="{name}: {euros} \u20ac",r.nonScalingStroke=!0,r.strokeWidth=.5,e.events.on("ready",(function(){var e=n.getPolygonById("FI");e.fill=i.b("#FFF"),e.tooltipText=""})),r.states.create("hover").properties.fill=i.b(m),function(){e&&e.dispose()}}),[l,c,m,a,t,o]),r.a.createElement("div",{id:"mapdiv",style:{width:"100%",height:"100%",overflow:"hidden"}})},p=a(505),f=function(e){var t=e.setFlow,a=Object(n.useState)(!0),o=Object(c.a)(a,2),l=o[0],i=o[1];return r.a.createElement("div",{style:{position:"absolute",bottom:"2em",left:"2em"}},r.a.createElement(p.a.Group,null,r.a.createElement(p.a,{toggle:!0,active:l,content:"Exports",onClick:function(e){l||(i(!0),t("exports"))}}),r.a.createElement(p.a,{toggle:!0,active:!l,content:"Imports",onClick:function(e){l&&(i(!1),t("imports"))}})))},h=a(88),g=a(207),v=a(206),b=a(508),E=function(e){var t=e.tradeBalance;return Object(n.useEffect)((function(){i.e(g.a),i.e(v.a);var e=i.c("chartdiv",h.f);e.responsive.enabled=!0,e.rotate=!0,e.data=t,e.marginRight="100";var a=e.xAxes.push(new h.a);a.dataFields.category="year",a.numberFormatter.numberFormat="#",a.renderer.inversed=!0,a.renderer.grid.template.location=0,a.renderer.cellStartLocation=.1,a.renderer.cellEndLocation=.9;var n=e.yAxes.push(new h.e);n.numberFormatter.numberFormat="##.##a",n.numberFormatter.bigNumberPrefixes=[{number:1e9,suffix:"B"}];var r=e.series.push(new h.b);r.name="Trade Balance",r.fill=i.b("#2E8B57"),r.strokeWidth=0,r.dataFields.valueY="tradeBalance",r.dataFields.categoryX="year",r.columns.template.height=i.d(100),r.sequencedInterpolation=!0,r.columns.template.tooltipText="{name}:\n\u20ac{valueY}",r.columns.template.adapter.add("fill",(function(e,t){return t.dataItem&&t.dataItem.valueY<0?i.b("#800000"):e}));var o=e.series.push(new h.b);o.name="Imports to Finland",o.fill=i.b("#63718B"),o.strokeWidth=0,o.dataFields.valueY="imports",o.dataFields.categoryX="year",o.columns.template.height=i.d(100),o.sequencedInterpolation=!0,o.columns.template.tooltipText="{name}:\n\u20ac{valueY}";var l=e.series.push(new h.b);return l.name="Exports from Finland",l.fill=i.b("#EBA05C"),l.strokeWidth=0,l.dataFields.valueY="exports",l.dataFields.categoryX="year",l.columns.template.height=i.d(100),l.sequencedInterpolation=!0,l.columns.template.tooltipText="{name}:\n\u20ac{valueY}",function(){e&&e.dispose()}}),[t]),r.a.createElement("div",{style:{width:"100%",height:"100%",overflow:"hidden",paddingTop:"3em",textAlign:"center"}},r.a.createElement(b.a,{inverted:!0,as:"h3"},"Finnish Trade Balance"),r.a.createElement("div",{id:"chartdiv",style:{width:"100%",height:"95%"}}))},y=function(e){var t=e.SITC2Data,a=e.flow,o={id:"products-treemap-div-".concat(a)};return Object(n.useEffect)((function(){i.e(g.a),i.e(v.a);var e=i.c("products-treemap-div-".concat(a),h.d);e.responsive.enabled=!0,e.data=t,e.dataFields.value="value",e.dataFields.name="group",e.dataFields.children="children";var n=e.seriesTemplates.create("1");return n.columns.template.tooltipText="{group}: {value} \u20ac",n.tooltip.pointerOrientation="down",e.legend=new h.c,e.legend.position="bottom",e.legend.paddingTop=20,e.legend.itemContainers.template.tooltipText="{group}",e.legend.labels.template.text="",e.responsive.rules.push({relevant:i.a.widthXL,state:function(e,t){if(e instanceof h.c){var a=e.states.create(t);return console.log(a),a.sprite.itemContainers.template.clickable=!1,a.sprite.itemContainers.template.focusable=!1,a}return null}}),function(){e&&e.dispose()}}),[t,a]),r.a.createElement("div",{style:{width:"100%",height:"100vh",paddingTop:"3em",paddingRight:"10vw",paddingLeft:"10vw",textAlign:"center"}},r.a.createElement(b.a,{inverted:!0,as:"h3"},"Finnish ",a," by product category"),r.a.createElement("div",Object.assign({},o,{style:{width:"100%",height:"90%"}})))},w=a(77),x=a.n(w),O=a(122),j=a.n(O),C=function(){var e;return x.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.a.awrap(j.a.get("/imports"));case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}))},F=function(){var e;return x.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.a.awrap(j.a.get("/exports"));case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}))},k=function(){var e;return x.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.a.awrap(j.a.get("/tradebalance"));case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}))},S=function(e){var t;return x.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,x.a.awrap(j.a.get("/SITC2/".concat(e)));case 2:return t=a.sent,a.abrupt("return",t);case 4:case"end":return a.stop()}}))},T=function(e,t){var a;return x.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,x.a.awrap(j.a.get("/SITC2/".concat(e,"/").concat(t[0].code)));case 2:return a=n.sent,n.abrupt("return",a);case 4:case"end":return n.stop()}}))},I=function(){var e;return x.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.a.awrap(j.a.get("/countries"));case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}))},B=a(504),N=a(499),R=a(507),L=a(142),P=a(502),A=function(e){var t=e.country,a=e.tradeData,n=e.flow;return r.a.createElement(P.a,{inverted:!0,basic:!0,compact:!0,celled:!0,selectable:!0,singleLine:!0},r.a.createElement(P.a.Header,null,r.a.createElement(P.a.Row,null,r.a.createElement(P.a.HeaderCell,{colSpan:"2",textAlign:"center"},r.a.createElement(b.a,{as:"h3",style:{color:"#fff"}},"Finland ",n," ",t[0].name)))),r.a.createElement(P.a.Body,null,a.slice(0,10).map((function(e){return r.a.createElement(P.a.Row,{key:e.group},r.a.createElement(P.a.Cell,null,e.group),r.a.createElement(P.a.Cell,null,e.value," \u20ac"))}))))},D=function(e){var t=e.country,a=e.setCountry,o=e.setCountryFilter,l=Object(n.useState)([]),i=Object(c.a)(l,2),s=i[0],u=i[1],d=Object(n.useState)([]),m=Object(c.a)(d,2),f=m[0],h=m[1];return Object(n.useEffect)((function(){T("imports",t).then((function(e){u(e.data)})),T("exports",t).then((function(e){h(e.data)}))}),[t]),0===t.length?null:0===s.length&&0===f.length?r.a.createElement(B.a,{active:!0},r.a.createElement(N.a,null)):r.a.createElement(R.a,{container:!0,stackable:!0,relaxed:!0},r.a.createElement(p.a,{icon:!0,circular:!0,onClick:function(){o(""),a([])},style:{position:"absolute",top:"1em",left:"1em"}},r.a.createElement(L.a,{name:"angle left",size:"large"})),r.a.createElement(R.a.Row,{columns:2},r.a.createElement(R.a.Column,null,r.a.createElement(A,{country:t,tradeData:s,flow:"imported from"})),r.a.createElement(R.a.Column,null,r.a.createElement(A,{country:t,tradeData:f,flow:"exported to"}))))},Y=a(503),W=a(208),z=a.n(W),H=function(e){var t=e.handleCountryFilterChange,a=e.countryNames,o=Object(n.useState)(""),l=Object(c.a)(o,2),i=l[0],s=l[1],u=Object(n.useState)(!1),d=Object(c.a)(u,2),m=d[0],p=d[1],f=Object(n.useState)([]),h=Object(c.a)(f,2),g=h[0],v=h[1];return r.a.createElement(Y.a,{placeholder:"Search...",loading:m,onResultSelect:function(e,a){var n=a.result;s(n.title),t(n.title)},onSearchChange:z.a.debounce((function(e,n){var r=n.value;if(p(!0),s(r),p(!0),s(r),r.length<1)return s(""),p(!1),void v([]);var o=new RegExp(z.a.escapeRegExp(r),"i");p(!1);var l=z.a.filter(a,(function(e){return o.test(e.title)}));l.length>20?v([{title:"Please narrow down your search."}]):v(l),1===g.length&&t(g[0].title),console.log(g)}),500,{leading:!0}),results:g,resultRenderer:function(e){var t=e.title;return r.a.createElement("div",null,t)},value:i})},X=a(506),Z=function(){return r.a.createElement(X.a,{inverted:!0,stackable:!0,size:"large",style:{backgroundColor:"#333",marginBottom:"0px"}},r.a.createElement(X.a.Item,{header:!0},"Finnish Foreign Trade Visualized"),r.a.createElement(X.a.Item,{link:!0,as:"a",href:"#trade-map"},"Trade Map"),r.a.createElement(X.a.Item,{link:!0,as:"a",href:"#trade-balance"},"Trade Balance"),r.a.createElement(X.a.Item,{link:!0,as:"a",href:"#imports-by-product"},"By product group"),r.a.createElement(X.a.Item,{link:!0,as:"a",href:"#trade-partners"},"By trade partner"))},q=a(500),G=function(){return r.a.createElement(X.a,{inverted:!0,secondary:!0,style:{backgroundColor:"#333",marginTop:"0px"}},r.a.createElement(q.a,{fluid:!0},r.a.createElement(X.a.Item,{link:!0,as:"a",href:"https://github.com/joonaspartanen/finnish-foreign-trade"},"About")))},J=a(143),M=a.n(J),_=function(){var e=Object(n.useState)([]),t=Object(c.a)(e,2),a=t[0],o=t[1],l=Object(n.useState)([]),i=Object(c.a)(l,2),s=i[0],u=i[1],d=Object(n.useState)([]),p=Object(c.a)(d,2),h=p[0],g=p[1],v=Object(n.useState)([]),b=Object(c.a)(v,2),w=b[0],x=b[1],O=Object(n.useState)([]),j=Object(c.a)(O,2),T=j[0],B=j[1],R=Object(n.useState)("exports"),L=Object(c.a)(R,2),P=L[0],A=L[1],Y=Object(n.useState)([]),W=Object(c.a)(Y,2),z=W[0],X=W[1],J=Object(n.useState)(""),_=Object(c.a)(J,2),Q=_[0],V=_[1],K=Object(n.useState)([]),U=Object(c.a)(K,2),$=U[0],ee=U[1];return Object(n.useEffect)((function(){C().then((function(e){o(e.data)})),F().then((function(e){u(e.data)})),k().then((function(e){g(e.data)})),S("imports").then((function(e){x(e.data)})),S("exports").then((function(e){B(e.data)})),I().then((function(e){ee(e.data)}))}),[]),console.log("Flow: ",P),r.a.createElement("div",{style:{backgroundColor:"#333",paddingLeft:0,paddingRight:0}},r.a.createElement(q.a,{fluid:!0},r.a.createElement(Z,null),(0===a.length||0===s.length)&&r.a.createElement("div",{style:{height:"100vh"}},r.a.createElement(N.a,{active:!0})),a.length>0&&s.length>0&&r.a.createElement("div",null,r.a.createElement(M.a,{id:"trade-map"},r.a.createElement("div",{className:"section",style:{position:"relative",height:"calc(100vh - 60px)",backgroundColor:"#333"}},r.a.createElement(m,{imports:a,exports:s,flow:P}),r.a.createElement(f,{setFlow:A}),r.a.createElement("a",{href:"#trade-balance",style:{position:"absolute",bottom:"2em"}},r.a.createElement("div",{className:"arrow-down"})))),r.a.createElement(M.a,{id:"trade-balance"},r.a.createElement("div",{className:"section",style:{height:"100vh",backgroundColor:"#333",position:"relative",padding:"0 0 4em 0"}},r.a.createElement(E,{tradeBalance:h}),r.a.createElement("a",{href:"#imports-by-product",style:{position:"absolute",bottom:"2em"}},r.a.createElement("div",{className:"arrow-down"})))),r.a.createElement(M.a,{id:"imports-by-product"},r.a.createElement("div",{className:"section",style:{height:"100vh",backgroundColor:"#222",position:"relative",padding:"0 0 3em 0"}},r.a.createElement(y,{SITC2Data:w,flow:"imports"}),r.a.createElement("a",{href:"#exports-by-product",style:{position:"absolute",bottom:"2em"}},r.a.createElement("div",{className:"arrow-down"})))),r.a.createElement(M.a,{id:"exports-by-product"},r.a.createElement("div",{className:"section",style:{height:"100vh",backgroundColor:"#333",position:"relative",padding:"0 0 3em 0"}},r.a.createElement(y,{SITC2Data:T,flow:"exports"}),r.a.createElement("a",{href:"#trade-partners",style:{position:"absolute",bottom:"2em"}},r.a.createElement("div",{className:"arrow-down"})))),r.a.createElement(M.a,{id:"trade-partners"},r.a.createElement("div",{className:"section",style:{minHeight:"calc(100vh - 40px)",backgroundColor:"#222",position:"relative",padding:"0 0 3em 0"}},0===z.length&&r.a.createElement(H,{countryFilter:Q,handleCountryFilterChange:function(e){V(e);var t=$.filter((function(t){return t.name===e}));X(t)},countryNames:$.map((function(e){return{title:e.name,key:e.code}}))}),0!==z.length&&r.a.createElement(D,{country:z,setCountry:X,setCountryFilter:V})))),r.a.createElement(G,null)))};l.a.render(r.a.createElement(_,null),document.getElementById("root"))}},[[317,1,3]]]);
//# sourceMappingURL=main.272207eb.chunk.js.map