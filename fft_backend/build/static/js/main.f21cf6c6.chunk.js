(this.webpackJsonpfft_frontend=this.webpackJsonpfft_frontend||[]).push([[0],{317:function(e,t,a){e.exports=a(487)},322:function(e,t,a){},487:function(e,t,a){"use strict";a.r(t);var n=a(6),r=a.n(n),o=a(109),l=a.n(o),c=a(55),i=(a(322),a(34)),s=a(156),u=a(307),d=a(295),m=function(e){var t=e.imports,a=e.exports,o=e.flow,l=(e.year,null),c="#5E5B78",m="#4B0000";return"exports"===o?(l=a,c="#5E5B78",m="#4B0000"):(l=t,c="#C17D80",m="#161331"),Object(n.useEffect)((function(){console.log(o),console.log(a),console.log(t),i.d(u.a);var e=i.b("mapdiv",s.a);e.geodata=d.a,e.projection=new s.d.Mercator,e.zoomControl=new s.c,e.backgroundSeries.mapPolygons.template.polygon.fill=i.a("#EEE"),e.backgroundSeries.mapPolygons.template.polygon.fillOpacity=1,e.chartContainer.wheelable=!1,window.innerHeight>window.innerWidth?(e.homeZoomLevel=5,e.minZoomLevel=5):(e.homeZoomLevel=2,e.minZoomLevel=2),e.homeGeoPoint={latitude:50,longitude:11},e.maxPanOut=0;var n=e.series.push(new s.b);n.heatRules.push({property:"fill",target:n.mapPolygons.template,min:i.a(c).brighten(1.4),max:i.a(c).brighten(-.6)}),n.useGeodata=!0,n.exclude=["AQ","SJ"],n.data=l;var r=n.mapPolygons.template;return r.tooltipText="{name}: {euros} \u20ac",r.nonScalingStroke=!0,r.strokeWidth=.5,e.events.on("ready",(function(){var e=n.getPolygonById("FI");e.fill=i.a("#FFF"),e.tooltipText=""})),r.states.create("hover").properties.fill=i.a(m),function(){e&&e.dispose()}}),[l,c,m,a,t,o]),r.a.createElement("div",{id:"mapdiv",style:{width:"100%",height:"100%",overflow:"hidden"}})},p=a(505),h=function(e){var t=e.setFlow,a=Object(n.useState)(!0),o=Object(c.a)(a,2),l=o[0],i=o[1];return r.a.createElement("div",{style:{position:"absolute",bottom:"2em",left:"2em"}},r.a.createElement(p.a.Group,null,r.a.createElement(p.a,{toggle:!0,active:l,content:"Exports",onClick:function(e){l||(i(!0),t("exports"))}}),r.a.createElement(p.a,{toggle:!0,active:!l,content:"Imports",onClick:function(e){l&&(i(!1),t("imports"))}})))},f=a(67),g=a(207),v=a(206),b=a(508),E=function(e){var t=e.tradeBalance;return Object(n.useEffect)((function(){i.d(g.a),i.d(v.a);var e=i.b("chartdiv",f.f);if(e.data=t,e.marginRight="100",window.innerHeight>window.innerWidth){var a=e.yAxes.push(new f.a);a.dataFields.category="year",a.numberFormatter.numberFormat="#",a.renderer.inversed=!0,a.renderer.grid.template.location=0,a.renderer.cellStartLocation=.1,a.renderer.cellEndLocation=.9;var n=e.xAxes.push(new f.e);n.min=-1e9,n.strictMinMax=!0,n.numberFormatter.numberFormat="##.##a",n.numberFormatter.bigNumberPrefixes=[{number:1e9,suffix:"B"}],n.renderer.opposite=!0;var r=e.series.push(new f.b);r.name="Trade Balance",r.fill=i.a("#2E8B57"),r.strokeWidth=0,r.dataFields.valueX="tradeBalance",r.dataFields.categoryY="year",r.columns.template.height=i.c(100),r.sequencedInterpolation=!0,r.columns.template.tooltipText="{name}:\n\u20ac{valueX}",r.columns.template.adapter.add("fill",(function(e,t){return t.dataItem&&t.dataItem.valueX<0?i.a("#800000"):e}));var o=e.series.push(new f.b);o.name="Imports to Finland (2018)",o.fill=i.a("#63718B"),o.strokeWidth=0,o.dataFields.valueX="imports",o.dataFields.categoryY="year",o.columns.template.height=i.c(100),o.sequencedInterpolation=!0,o.columns.template.tooltipText="{name}:\n\u20ac{valueX}";var l=e.series.push(new f.b);l.name="Exports from Finland (2018)",l.fill=i.a("#EBA05C"),l.strokeWidth=0,l.dataFields.valueX="exports",l.dataFields.categoryY="year",l.columns.template.height=i.c(100),l.sequencedInterpolation=!0,l.columns.template.tooltipText="{name}:\n\u20ac{valueX}"}else{var c=e.xAxes.push(new f.a);c.dataFields.category="year",c.numberFormatter.numberFormat="#",c.renderer.inversed=!0,c.renderer.grid.template.location=0,c.renderer.cellStartLocation=.1,c.renderer.cellEndLocation=.9;var s=e.yAxes.push(new f.e);s.numberFormatter.numberFormat="##.##a",s.numberFormatter.bigNumberPrefixes=[{number:1e9,suffix:"B"}];var u=e.series.push(new f.b);u.name="Trade Balance",u.fill=i.a("#2E8B57"),u.strokeWidth=0,u.dataFields.valueY="tradeBalance",u.dataFields.categoryX="year",u.columns.template.height=i.c(100),u.sequencedInterpolation=!0,u.columns.template.tooltipText="{name}:\n\u20ac{valueY}",u.columns.template.adapter.add("fill",(function(e,t){return t.dataItem&&t.dataItem.valueY<0?i.a("#800000"):e}));var d=e.series.push(new f.b);d.name="Imports to Finland (2018)",d.fill=i.a("#63718B"),d.strokeWidth=0,d.dataFields.valueY="imports",d.dataFields.categoryX="year",d.columns.template.height=i.c(100),d.sequencedInterpolation=!0,d.columns.template.tooltipText="{name}:\n\u20ac{valueY}";var m=e.series.push(new f.b);m.name="Exports from Finland (2018)",m.fill=i.a("#EBA05C"),m.strokeWidth=0,m.dataFields.valueY="exports",m.dataFields.categoryX="year",m.columns.template.height=i.c(100),m.sequencedInterpolation=!0,m.columns.template.tooltipText="{name}:\n\u20ac{valueY}"}return function(){e&&e.dispose()}}),[t]),r.a.createElement("div",{style:{width:"100%",height:"100%",overflow:"hidden",paddingTop:"3em",textAlign:"center"}},r.a.createElement(b.a,{inverted:!0,as:"h3"},"Finnish Trade Balance"),r.a.createElement("div",{id:"chartdiv",style:{width:"100%",height:"95%"}}))},y=function(e){var t=e.SITC2Data,a=e.flow,o={id:"products-treemap-div-".concat(a)};return Object(n.useEffect)((function(){i.d(g.a),i.d(v.a);var e=i.b("products-treemap-div-".concat(a),f.d);return e.data=t,e.dataFields.value="value",e.dataFields.name="group",e.dataFields.children="children",e.seriesTemplates.create("1").columns.template.tooltipText="{group}: {value} \u20ac",window.innerHeight<window.innerWidth&&(e.legend=new f.c,e.legend.position="bottom",e.legend.paddingTop=20),function(){e&&e.dispose()}}),[t,a]),r.a.createElement("div",{style:{width:"100%",height:"100vh",paddingTop:"3em",paddingRight:"2em",paddingLeft:"2em",textAlign:"center"}},r.a.createElement(b.a,{inverted:!0,as:"h3"},"Finnish ",a," by product category (2018)"),r.a.createElement("div",Object.assign({},o,{style:{width:"100%",height:"95%"}})))},w=a(78),x=a.n(w),F=a(122),j=a.n(F),O=function(){var e;return x.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.a.awrap(j.a.get("/imports"));case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}))},C=function(){var e;return x.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.a.awrap(j.a.get("/exports"));case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}))},k=function(){var e;return x.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.a.awrap(j.a.get("/tradebalance"));case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}))},S=function(e){var t;return x.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,x.a.awrap(j.a.get("/SITC2/".concat(e)));case 2:return t=a.sent,a.abrupt("return",t);case 4:case"end":return a.stop()}}))},I=function(e,t){var a;return x.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,x.a.awrap(j.a.get("/SITC2/".concat(e,"/").concat(t[0].code)));case 2:return a=n.sent,n.abrupt("return",a);case 4:case"end":return n.stop()}}))},B=function(){var e;return x.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.a.awrap(j.a.get("/countries"));case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}))},T=a(504),N=a(499),A=a(507),L=a(142),R=a(502),P=function(e){var t=e.country,a=e.tradeData,n=e.flow;return r.a.createElement(R.a,{inverted:!0,basic:!0,celled:!0,selectable:!0,singleLine:!0},r.a.createElement(R.a.Header,null,r.a.createElement(R.a.Row,null,r.a.createElement(R.a.HeaderCell,{colSpan:"2",textAlign:"center"},r.a.createElement(b.a,{as:"h3",style:{color:"#fff"}},"Finland ",n," ",t[0].name)))),r.a.createElement(R.a.Body,null,a.slice(0,10).map((function(e){return r.a.createElement(R.a.Row,{key:e.group},r.a.createElement(R.a.Cell,null,e.group),r.a.createElement(R.a.Cell,null,e.value," \u20ac"))}))))},W=function(e){var t=e.country,a=e.setCountry,o=e.setCountryFilter,l=Object(n.useState)([]),i=Object(c.a)(l,2),s=i[0],u=i[1],d=Object(n.useState)([]),m=Object(c.a)(d,2),h=m[0],f=m[1];return Object(n.useEffect)((function(){I("imports",t).then((function(e){u(e.data)})),I("exports",t).then((function(e){f(e.data)}))}),[t]),0===t.length?null:0===s.length&&0===h.length?r.a.createElement(T.a,{active:!0},r.a.createElement(N.a,null)):r.a.createElement(A.a,{container:!0,stackable:!0,relaxed:!0},r.a.createElement(p.a,{icon:!0,circular:!0,onClick:function(){o(""),a([])},style:{position:"absolute",top:"1em",left:"1em"}},r.a.createElement(L.a,{name:"angle left",size:"large"})),r.a.createElement(A.a.Row,{columns:2},r.a.createElement(A.a.Column,null,r.a.createElement(P,{country:t,tradeData:s,flow:"imported from"})),r.a.createElement(A.a.Column,null,r.a.createElement(P,{country:t,tradeData:h,flow:"exported to"}))))},X=a(503),Y=a(208),D=a.n(Y),q=function(e){var t=e.handleCountryFilterChange,a=e.countryNames,o=Object(n.useState)(""),l=Object(c.a)(o,2),i=l[0],s=l[1],u=Object(n.useState)(!1),d=Object(c.a)(u,2),m=d[0],p=d[1],h=Object(n.useState)([]),f=Object(c.a)(h,2),g=f[0],v=f[1];return r.a.createElement(X.a,{placeholder:"Search...",loading:m,onResultSelect:function(e,a){var n=a.result;s(n.title),t(n.title)},onSearchChange:D.a.debounce((function(e,n){var r=n.value;if(p(!0),s(r),p(!0),s(r),r.length<1)return s(""),p(!1),void v([]);var o=new RegExp(D.a.escapeRegExp(r),"i");p(!1);var l=D.a.filter(a,(function(e){return o.test(e.title)}));l.length>20?v([{title:"Please narrow down your search."}]):v(l),1===g.length&&t(g[0].title),console.log(g)}),500,{leading:!0}),results:g,resultRenderer:function(e){var t=e.title;return r.a.createElement("div",null,t)},value:i})},H=a(506),z=a(500),M=function(){return r.a.createElement(H.a,{inverted:!0,size:"massive",style:{backgroundColor:"#333",marginBottom:"0px"}},r.a.createElement(z.a,{fluid:!0},r.a.createElement(H.a.Item,{header:!0},r.a.createElement(L.a,{name:"euro sign",size:"large"}),"Finnish Foreign Trade Visualized"),r.a.createElement(H.a.Item,{link:!0,as:"a",href:"#trade-map"},"Trade Map"),r.a.createElement(H.a.Item,{link:!0,as:"a",href:"#trade-balance"},"Trade Balance"),r.a.createElement(H.a.Item,{link:!0,as:"a",href:"#imports-by-product"},"By product group"),r.a.createElement(H.a.Item,{link:!0,as:"a",href:"#trade-partners"},"By trade partner")))},Z=function(){return r.a.createElement(H.a,{inverted:!0,secondary:!0,style:{backgroundColor:"#333",marginTop:"0px"}},r.a.createElement(z.a,{fluid:!0},r.a.createElement(H.a.Item,{link:!0,as:"a",href:"https://github.com/joonaspartanen/finnish-foreign-trade"},"About")))},G=a(143),J=a.n(G),_=function(){var e=Object(n.useState)([]),t=Object(c.a)(e,2),a=t[0],o=t[1],l=Object(n.useState)([]),i=Object(c.a)(l,2),s=i[0],u=i[1],d=Object(n.useState)([]),p=Object(c.a)(d,2),f=p[0],g=p[1],v=Object(n.useState)([]),b=Object(c.a)(v,2),w=b[0],x=b[1],F=Object(n.useState)([]),j=Object(c.a)(F,2),I=j[0],A=j[1],L=Object(n.useState)("exports"),R=Object(c.a)(L,2),P=R[0],X=R[1],Y=Object(n.useState)([]),D=Object(c.a)(Y,2),H=D[0],G=D[1],_=Object(n.useState)(""),Q=Object(c.a)(_,2),V=Q[0],K=Q[1],U=Object(n.useState)([]),$=Object(c.a)(U,2),ee=$[0],te=$[1];return Object(n.useEffect)((function(){O().then((function(e){o(e.data)})),C().then((function(e){u(e.data)})),k().then((function(e){g(e.data)})),S("imports").then((function(e){x(e.data)})),S("exports").then((function(e){A(e.data)})),B().then((function(e){te(e.data)}))}),[]),console.log("Flow: ",P),r.a.createElement("div",{style:{backgroundColor:"#333"}},r.a.createElement(z.a,{fluid:!0,style:{paddingLeft:0,paddingRight:0}},r.a.createElement(M,null),(0===a.length||0===s.length)&&r.a.createElement(T.a,{active:!0},r.a.createElement(N.a,null)),a.length>0&&s.length>0&&r.a.createElement("div",null,r.a.createElement(J.a,{id:"trade-map"},r.a.createElement("div",{className:"section",style:{position:"relative",height:"calc(100vh - 60px)",backgroundColor:"#333"}},r.a.createElement(m,{imports:a,exports:s,flow:P}),r.a.createElement(h,{setFlow:X}),r.a.createElement("a",{href:"#trade-balance",style:{position:"absolute",bottom:"2em"}},r.a.createElement("div",{className:"arrow-down"})))),r.a.createElement(J.a,{id:"trade-balance"},r.a.createElement("div",{className:"section",style:{height:"100vh",backgroundColor:"#333",position:"relative",padding:"0 0 3em 0"}},r.a.createElement(E,{tradeBalance:f}),r.a.createElement("a",{href:"#imports-by-product",style:{position:"absolute",bottom:"2em"}},r.a.createElement("div",{className:"arrow-down"})))),r.a.createElement(J.a,{id:"imports-by-product"},r.a.createElement("div",{className:"section",style:{height:"100vh",backgroundColor:"#222",position:"relative",padding:"0 0 3em 0"}},r.a.createElement(y,{SITC2Data:w,flow:"imports"}),r.a.createElement("a",{href:"#exports-by-product",style:{position:"absolute",bottom:"2em"}},r.a.createElement("div",{className:"arrow-down"})))),r.a.createElement(J.a,{id:"exports-by-product"},r.a.createElement("div",{className:"section",style:{height:"100vh",backgroundColor:"#333",position:"relative",padding:"0 0 3em 0"}},r.a.createElement(y,{SITC2Data:I,flow:"exports"}),r.a.createElement("a",{href:"#trade-partners",style:{position:"absolute",bottom:"2em"}},r.a.createElement("div",{className:"arrow-down"})))),r.a.createElement(J.a,{id:"trade-partners"},r.a.createElement("div",{className:"section",style:{minHeight:"calc(100vh - 40px)",backgroundColor:"#222",position:"relative",padding:"0 0 3em 0"}},0===H.length&&r.a.createElement(q,{countryFilter:V,handleCountryFilterChange:function(e){K(e);var t=ee.filter((function(t){return t.name===e}));G(t)},countryNames:ee.map((function(e){return{title:e.name,key:e.code}}))}),0!==H.length&&r.a.createElement(W,{country:H,setCountry:G,setCountryFilter:K})))),r.a.createElement(Z,null)))};l.a.render(r.a.createElement(_,null),document.getElementById("root"))}},[[317,1,3]]]);
//# sourceMappingURL=main.f21cf6c6.chunk.js.map